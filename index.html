<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Birthday Surprise üéÅ</title>

  <link href="https://fonts.googleapis.com/css2?family=Fredoka:wght@400;500;600&family=Baloo+2:wght@500;700&family=Great+Vibes&display=swap" rel="stylesheet">

  <style>
    * { box-sizing: border-box; margin: 0; padding: 0; }

    body {
      font-family: 'Fredoka', cursive;
      min-height: 100vh;
      color: #444;
      overflow-x: hidden;
      text-align: center;
      background: #000; /* default */
    }

    .music-btn {
      position: fixed;
      top: 16px;
      right: 16px;
      z-index: 10;
      background: rgba(255,255,255,0.9);
      border: none;
      border-radius: 50%;
      width: 46px;
      height: 46px;
      font-size: 1.2rem;
      cursor: pointer;
      box-shadow: 0 8px 20px rgba(0,0,0,0.2);
    }

    section {
      min-height: 100vh;
      display: none;
      align-items: center;
      justify-content: center;
      flex-direction: column;
      padding: 40px 20px;
      opacity: 0;
      transition: opacity 1s ease;
      position: relative;
    }

    section.active { display: flex; opacity: 1; }

    h1 { margin-bottom: 20px; }

    .subtitle { font-size: 1.1rem; opacity: 0.85; margin-bottom: 30px; }

    /* Step 0: Are you ready */
    #step0 { background: #000; color: #fff; }
    #step0 h1, #step0 .subtitle { color: #fff; }
    .countdown {
      font-family: 'Baloo 2', cursive;
      font-size: clamp(4rem,12vw,7rem);
      margin-top: 20px;
      letter-spacing: 4px;
    }

    /* Step 1: Happy 21st Birthday */
    #step1 { overflow: hidden; }
    .birthday-bg {
      position: absolute;
      inset: 0;
      display: grid;
      grid-template-columns: repeat(3,1fr);
      grid-template-rows: repeat(4,1fr);
      gap: 4px;
      z-index: 0;
    }
    .birthday-bg img { width: 100%; height: 100%; object-fit: cover; filter: brightness(0.25) blur(1px); }
    .birthday-container {
      position: relative;
      z-index: 2;
      background: rgba(0,0,0,0.65);
      padding: 40px 30px;
      border-radius: 20px;
      box-shadow: 0 20px 40px rgba(0,0,0,0.4);
      display: flex;
      flex-direction: column;
      align-items: center;
      animation: float 3s ease-in-out infinite;
    }
    @keyframes float { 0%,100%{ transform: translateY(0); } 50%{ transform: translateY(-10px); } }
    .typewriter {
      font-family: 'Great Vibes', cursive;
      font-size: clamp(3rem,8vw,6rem);
      color: #fff;
      white-space: nowrap;
      overflow: hidden;
      border-right: 0.15em solid #fff;
    }
    .next-btn {
      margin-top: 30px;
      background: #fb6f92;
      border-radius: 50%;
      width: 60px;
      height: 60px;
      font-size: 1.5rem;
      box-shadow: 0 10px 20px rgba(0,0,0,0.3);
      cursor: pointer;
      border: none;
      color: #fff;
      transition: transform 0.3s ease;
    }
    .next-btn:hover { transform: translateY(-5px) scale(1.05); }

    /* Confetti */
    .confetti { position: fixed; inset: 0; pointer-events: none; z-index: 20; overflow: visible; }

    /* Step 2: Gifts */
    .gift-area { display: flex; gap: clamp(20px,6vw,50px); flex-wrap: wrap; justify-content: center; margin-top:30px; }
    .gift {
      width: 110px; height: 110px; border-radius: 14px; position: relative; cursor: pointer;
      box-shadow: 0 12px 25px rgba(0,0,0,0.25); animation: bounce 2.5s ease-in-out infinite;
    }
    .gift::before, .gift::after { content: ''; position: absolute; background: rgba(255,255,255,0.85); }
    .gift::before { width: 100%; height: 16px; top: 45%; left:0; }
    .gift::after { width:16px;height:100%;left:45%;top:0; }
    .gift.red { background: linear-gradient(135deg,#ff6b6b,#ff8787); }
    .gift.blue { background: linear-gradient(135deg,#4dabf7,#74c0fc); }
    .gift.green { background: linear-gradient(135deg,#51cf66,#8ce99a); }
    @keyframes bounce { 0%,100%{transform:translateY(0);}50%{transform:translateY(-10px);} }

    .msg-box {
      position: absolute;
      top: 120%;
      left: 50%;
      transform: translateX(-50%);
      margin-top: 20px;
      padding: 14px 18px;
      background: rgba(255,255,255,0.95);
      color: #444;
      border-radius: 18px;
      border: 2px dashed #ff8fab;
      max-width: 240px;
      font-size: 0.95rem;
      display: none;
      opacity: 0;
      transition: opacity 0.8s ease;
    }

    /* Step 3: Letter */
    .envelope { width:220px; height:140px; background:#fff3e0; border-radius:12px; overflow:hidden; cursor:pointer; position:relative; }
    .envelope .letter { position:absolute; top:100%; width:100%; height:100%; background:#fff; padding:14px; border-radius:8px; box-shadow:0 8px 15px rgba(0,0,0,0.2); transition: top 1s ease; }
    .envelope.open .letter { top:0; }

    button { margin-top:40px; padding:12px 28px; border:none; border-radius:30px; background:#fb6f92; color:#fff; font-size:1rem; cursor:pointer; box-shadow:0 10px 20px rgba(0,0,0,0.2); }
  </style>
</head>
<body>

<!-- Music Button -->
<button class="music-btn" onclick="toggleMusic()">üéµ</button>
<audio id="bgMusic" loop><source src="music.mp3" type="audio/mpeg"></audio>
<audio id="tickSound"><source src="countdown.mp3" type="audio/mpeg"></audio>

<div class="confetti" id="confetti"></div>

<!-- STEP 0: Are you ready -->
<section class="active" id="step0">
  <h1>Are you ready? üéÅ</h1>
  <div class="subtitle">The surprise starts in</div>
  <div class="countdown" id="countdown">10</div>
</section>

<!-- STEP 1: Happy 21st Birthday -->
<section id="step1">
  <div class="birthday-bg">
    <img src="BDAY/1.jpg">
    <img src="BDAY/2.jpg">
    <img src="BDAY/3.jpg">
    <img src="BDAY/4.jpg">
    <img src="BDAY/5.jpg">
    <img src="BDAY/6.jpg">
    <img src="BDAY/7.jpg">
    <img src="BDAY/8.jpg">
    <img src="BDAY/9.jpg">
    <img src="BDAY/10.jpg">
    <img src="BDAY/11.jpg">
  </div>
  <div class="birthday-container">
    <div class="typewriter" id="birthdayText">Happy 21st Birthday!</div>
    <button class="next-btn" onclick="nextStep(2)">‚û°Ô∏è</button>
  </div>
</section>

<!-- STEP 2: Gifts -->
<section id="step2">
  <h1>Unbox the Gifts üéâ</h1>
  <div class="subtitle">Tap each box to reveal a message</div>
  <div class="gift-area">
    <div><div class="gift red" onclick="openGift(this,'You make every hangout better üòÑ')"></div><div class="msg-box"></div></div>
    <div><div class="gift blue" onclick="openGift(this,'Thanks for being real and always there ü§ç')"></div><div class="msg-box"></div></div>
    <div><div class="gift green" onclick="openGift(this,'Here‚Äôs to more memories together ü•≥')"></div><div class="msg-box"></div></div>
  </div>
  <button onclick="nextStep(3)">Next üíå</button>
</section>

<!-- STEP 3: Letter -->
<section id="step3">
  <h1>A Letter for You üíå</h1>
  <div class="subtitle">Pull it out slowly</div>
  <div class="envelope" onclick="this.classList.toggle('open')">
    <div class="letter">
      <p>Dear Bestie,<br><br>
      Thank you for the laughs, the chaos, and the comfort. Life is brighter with you around, and I‚Äôm so grateful for our friendship. I hope this year brings you happiness, growth, and all the good things you deserve.<br><br>
      Always here for you ü§ç
      </p>
    </div>
  </div>
</section>

<script>
// Step control
let currentStep = 0;
function nextStep(step){
  const prev = document.getElementById('step'+currentStep);
  const next = document.getElementById('step'+step);
  prev.style.opacity = 0;
  setTimeout(()=>{
    prev.style.display = 'none';
    next.style.display = 'flex';
    setTimeout(()=>{ next.style.opacity = 1; },50);
    currentStep = step;
  },1000);
}

// Countdown
let time = 10;
const countdownEl = document.getElementById('countdown');
const tickSound = document.getElementById('tickSound');

function startCountdown(){
  countdownEl.textContent = time;
  const timer = setInterval(()=>{
    time--;
    countdownEl.textContent = time;
    if(tickSound){ tickSound.currentTime=0; tickSound.play(); }
    if(time<=0){
      clearInterval(timer);
      launchConfetti();
      setTimeout(()=>nextStep(1),1200);
    }
  },1000);
}

// Confetti
function launchConfetti(){
  const confetti = document.getElementById('confetti');
  confetti.innerHTML = '';
  const colors = ['#ff6b6b','#ffd43b','#69db7c','#4dabf7','#da77f2'];

  for(let i=0;i<150;i++){
    const piece = document.createElement('span');
    piece.style.background = colors[Math.floor(Math.random()*colors.length)];
    piece.style.width = 12 + Math.random()*16 + 'px';
    piece.style.height = 14 + Math.random()*18 + 'px';
    piece.style.borderRadius = Math.random()>0.5?'50%':'4px';
    piece.style.left = '50%';
    piece.style.top = '50%';
    piece.style.position = 'absolute';
    piece.style.opacity = 1;

    const angle = Math.random() * 2 * Math.PI;
    const distance = 100 + Math.random()*250;
    const dx = Math.cos(angle) * distance;
    const dy = Math.sin(angle) * distance + 50;
    const duration = 2 + Math.random()*1.5;

    piece.style.transition = `transform ${duration}s ease-out, opacity ${duration}s ease-out`;
    confetti.appendChild(piece);

    setTimeout(()=>{ 
      piece.style.transform = `translate(${dx}px,${dy}px) rotate(${Math.random()*720}deg)`; 
      piece.style.opacity=0;
    },50);
  }
  setTimeout(()=>{ confetti.innerHTML=''; },3500);
}

// Gifts
function openGift(gift,msg){
  if(gift.classList.contains('unwrap')) return;
  gift.style.transition='transform 0.7s ease, opacity 0.7s ease';
  gift.style.transform='scale(0) rotate(360deg)';
  gift.style.opacity=0;

  const box = gift.parentElement.querySelector('.msg-box');
  setTimeout(()=>{
    box.textContent = msg;
    box.style.display='block';
    box.style.opacity=0;
    setTimeout(()=>{ box.style.opacity=1; },50);
  },700);
  gift.classList.add('unwrap');
}

// Music
const bgMusic=document.getElementById('bgMusic');
function toggleMusic(){ if(bgMusic.paused) bgMusic.play(); else bgMusic.pause(); }

// Typewriter animation for Step 1
function typeWriter(el,text,speed=120){
  let i=0;
  el.textContent='';
  function type(){ if(i<text.length){ el.textContent+=text.charAt(i); i++; setTimeout(type,speed); } }
  type();
}

nextStep(0);
startCountdown();
typeWriter(document.getElementById('birthdayText'), 'Happy 21st Birthday!');
</script>

</body>
</html>
