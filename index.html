<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Birthday Surprise ğŸ</title>

  <link href="https://fonts.googleapis.com/css2?family=Fredoka:wght@400;500;600&family=Baloo+2:wght@500;700&family=Pacifico&display=swap" rel="stylesheet">

  <style>
    * {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
    }

    body {
      font-family: 'Fredoka', cursive;
      min-height: 100vh;
      overflow-x: hidden;
      text-align: center;
      background: #f8f9fa;
    }

    section {
      min-height: 100vh;
      display: none;
      align-items: center;
      justify-content: center;
      flex-direction: column;
      padding: 4vh 5vw;
      opacity: 0;
      transition: opacity 1s ease;
    }

    section.active {
      display: flex;
      opacity: 1;
    }

    h1 {
      font-family: 'Baloo 2', cursive;
      font-size: clamp(2.2rem, 6.5vw, 4.5rem);
      margin-bottom: 1rem;
      line-height: 1.1;
    }

    .subtitle {
      font-size: clamp(1rem, 3.5vw, 1.3rem);
      opacity: 0.9;
      margin-bottom: 1.8rem;
      max-width: 90%;
    }

    /* â”€â”€ STEP 0 â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
    #step0 {
      background: #000;
      color: #fff;
    }

    .countdown {
      font-size: clamp(5rem, 15vw, 9rem);
      font-family: 'Baloo 2', cursive;
      letter-spacing: 6px;
      margin-top: 1rem;
    }

    /* â”€â”€ STEP 1 â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
    #step1 {
      position: relative;
      color: #fff;
      overflow: hidden;
    }

    #step1 .collage {
      position: absolute;
      inset: 0;
      display: grid;
      grid-template-columns: repeat(3, 1fr);
      grid-template-rows: repeat(3, 1fr);
      z-index: 0;
    }

    #step1 .collage img {
      width: 100%;
      height: 100%;
      object-fit: cover;
      filter: brightness(0.28);
    }

    #step1 .container {
      position: relative;
      z-index: 2;
      background: rgba(0, 0, 0, 0.65);
      padding: clamp(2rem, 6vw, 4.5rem) clamp(1.5rem, 5vw, 3.5rem);
      border-radius: 20px;
      box-shadow: 0 12px 35px rgba(0, 0, 0, 0.5);
      max-width: 90vw;
      width: 100%;
      max-width: 680px;
      backdrop-filter: blur(6px);
      overflow: hidden;           /* prevents text overflow */
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
    }

    #step1 .typewriter h1 {
      font-family: 'Pacifico', cursive;
      font-size: clamp(2.4rem, 8vw, 4.8rem);   /* smaller max size */
      line-height: 1.1;
      color: white;                            /* â† changed to white as requested */
      text-shadow: 2px 2px 10px rgba(0, 0, 0, 0.7);
      margin: 0.4em 0 0.8em;
      padding: 0 0.5em;                        /* extra inner spacing */
      overflow: hidden;
      border-right: .15em solid #fff;
      white-space: nowrap;
      animation: typing 3.5s steps(30, end), blink-caret .9s step-end infinite;
      max-width: 100%;                         /* ensures it stays inside */
      text-align: center;
    }

    /* â”€â”€ GIFTS (STEP 2) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
    #step2 {
      background: linear-gradient(180deg, #fff1f3, #ffe6e9);
      color: #222;
    }

    .gift-area {
      display: flex;
      flex-wrap: wrap;
      gap: clamp(1.5rem, 5vw, 4rem);
      justify-content: center;
      margin: 2rem 0 3rem;
      width: 100%;
      max-width: 1100px;
      padding: 0 3vw;
    }

    .gift-container {
      position: relative;
      width: clamp(100px, 24vw, 140px);
      aspect-ratio: 1 / 1;
    }

    .gift {
      width: 100%;
      height: 100%;
      border-radius: 16px;
      cursor: pointer;
      box-shadow: 0 10px 24px rgba(0, 0, 0, 0.25);
      animation: bounce 2.6s ease-in-out infinite;
      transition: all 0.7s ease;
    }

    .gift::before,
    .gift::after {
      content: '';
      position: absolute;
      background: rgba(255, 255, 255, 0.9);
    }

    .gift::before { width: 100%; height: 16px; top: 45%; left: 0; }
    .gift::after  { width: 16px;  height: 100%; left: 45%; top: 0; }

    .gift.red   { background: linear-gradient(135deg, #ff6b6b, #ff8f8f); }
    .gift.blue  { background: linear-gradient(135deg, #4dabf7, #7ac8ff); }
    .gift.green { background: linear-gradient(135deg, #51cf66, #90e0b0); }

    @keyframes bounce {
      0%, 100% { transform: translateY(0); }
      50%      { transform: translateY(-10px); }
    }

    .msg-box {
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%) scale(0.7);
      padding: 1rem 1.3rem;
      background: rgba(255, 255, 255, 0.98);
      color: #222;
      border-radius: 16px;
      border: 2.5px dashed #ff8fab;
      box-shadow: 0 8px 22px rgba(0, 0, 0, 0.18);
      font-size: clamp(0.9rem, 2.8vw, 1.05rem);
      line-height: 1.45;
      text-align: center;
      min-width: 140px;
      max-width: min(260px, 85vw);
      width: max-content;
      pointer-events: none;
      opacity: 0;
      transition:
        opacity 0.8s ease,
        transform 0.7s cubic-bezier(0.34, 1.56, 0.64, 1);
      z-index: 2;
    }

    .msg-box.show {
      opacity: 1;
      transform: translate(-50%, -50%) scale(1);
    }

    /* Safety for small screens */
    @media (max-width: 480px) {
      #step1 .typewriter h1 {
        font-size: clamp(2.2rem, 9.5vw, 4rem);
      }
      .msg-box {
        max-width: 80vw;
        font-size: 0.95rem;
        padding: 0.9rem 1.1rem;
      }
    }

    /* â”€â”€ OTHER ELEMENTS â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
    .music-btn {
      position: fixed;
      top: 16px;
      right: 16px;
      z-index: 100;
      background: rgba(255, 255, 255, 0.9);
      border: none;
      border-radius: 50%;
      width: 50px;
      height: 50px;
      font-size: 1.4rem;
      cursor: pointer;
      box-shadow: 0 6px 18px rgba(0, 0, 0, 0.25);
    }

    .confetti {
      position: fixed;
      inset: 0;
      pointer-events: none;
      z-index: 20;
      overflow: visible;
    }

    .arrow-btn,
    button {
      margin-top: 2rem;
      padding: 0.8rem 2rem;
      font-size: 1.2rem;
      cursor: pointer;
      border: none;
      border-radius: 12px;
    }

    .arrow-btn {
      font-size: 3.2rem;
      background: rgba(255, 255, 255, 0.2);
      color: white;
      padding: 0.5rem 1.4rem;
      min-width: 80px;
      backdrop-filter: blur(8px);
    }

    button {
      background: #ff6b6b;
      color: white;
      box-shadow: 0 6px 16px rgba(255, 107, 107, 0.4);
    }

    /* Letter (step 3) */
    #step3 {
      background: linear-gradient(180deg, #fffaf0, #fff3e0);
      color: #333;
    }

    .envelope {
      width: 240px;
      height: 160px;
      background: #fff3e0;
      border-radius: 14px;
      overflow: hidden;
      cursor: pointer;
      position: relative;
      margin: 2rem 0;
    }

    .envelope .letter {
      position: absolute;
      top: 100%;
      width: 100%;
      height: 100%;
      background: #fff;
      padding: 1.2rem;
      border-radius: 10px;
      box-shadow: 0 10px 20px rgba(0, 0, 0, 0.2);
      transition: top 1.1s ease;
      font-size: 1.05rem;
      line-height: 1.6;
    }

    .envelope.open .letter {
      top: 0;
    }

    /* Animations */
    @keyframes typing {
      from { width: 0; }
      to   { width: 100%; }
    }

    @keyframes blink-caret {
      50% { border-color: transparent; }
    }
  </style>
</head>

<body>
  <button class="music-btn" onclick="toggleMusic()">ğŸµ</button>
  <audio id="bgMusic" loop>
    <source src="music.mp3" type="audio/mpeg" />
  </audio>
  <audio id="tickSound">
    <source src="countdown.mp3" type="audio/mpeg" />
  </audio>
  <div class="confetti" id="confetti"></div>

  <!-- Step 0 -->
  <section class="active" id="step0">
    <h1>Are you ready? ğŸ</h1>
    <div class="subtitle">The surprise starts in</div>
    <div class="countdown" id="countdown">10</div>
  </section>

  <!-- Step 1 -->
  <section id="step1">
    <div class="collage">
      <img src="BDAY/1.jpg" />
      <img src="BDAY/2.jpg" />
      <img src="BDAY/3.jpg" />
      <img src="BDAY/4.jpg" />
      <img src="BDAY/5.jpg" />
      <img src="BDAY/6.jpg" />
      <img src="BDAY/7.jpg" />
      <img src="BDAY/8.jpg" />
      <img src="BDAY/9.jpg" />
    </div>
    <div class="container typewriter">
      <h1>Happy 21st Birthday!</h1>
      <button class="arrow-btn" onclick="nextStep(2)">â†’</button>
    </div>
  </section>

  <!-- Step 2 -->
  <section id="step2">
    <h1>Unbox the Gifts ğŸ‰</h1>
    <div class="subtitle">Tap each box to reveal a message</div>
    <div class="gift-area">
      <div class="gift-container">
        <div class="gift red" onclick="openGift(this, 'You make every hangout better ğŸ˜„')"></div>
        <div class="msg-box"></div>
      </div>
      <div class="gift-container">
        <div class="gift blue" onclick="openGift(this, 'Thanks for being real and always there ğŸ¤')"></div>
        <div class="msg-box"></div>
      </div>
      <div class="gift-container">
        <div class="gift green" onclick="openGift(this, 'Hereâ€™s to more memories together ğŸ¥³')"></div>
        <div class="msg-box"></div>
      </div>
    </div>
    <button onclick="nextStep(3)">Next ğŸ’Œ</button>
  </section>

  <!-- Step 3 -->
  <section id="step3">
    <h1>A Letter for You ğŸ’Œ</h1>
    <div class="subtitle">Pull it out slowly</div>
    <div class="envelope" onclick="this.classList.toggle('open')">
      <div class="letter">
        <p>
          Dear Bestie,<br /><br />
          Thank you for the laughs, the chaos, and the comfort. Life is brighter with you around, and Iâ€™m so grateful for our friendship. I hope this year brings you happiness, growth, and all the good things you deserve.<br /><br />
          Always here for you ğŸ¤
        </p>
      </div>
    </div>
  </section>

  <script>
    let currentStep = 0;

    function nextStep(step) {
      const prev = document.getElementById("step" + currentStep);
      const next = document.getElementById("step" + step);
      prev.style.opacity = 0;
      setTimeout(() => {
        prev.style.display = "none";
        next.style.display = "flex";
        setTimeout(() => { next.style.opacity = 1; }, 50);
        currentStep = step;
      }, 1000);
    }

    // Countdown
    let time = 10;
    const countdownEl = document.getElementById("countdown");
    const tickSound = document.getElementById("tickSound");

    function startCountdown() {
      countdownEl.textContent = time;
      const timer = setInterval(() => {
        time--;
        countdownEl.textContent = time;
        if (time > 0 && tickSound) {
          tickSound.currentTime = 0;
          tickSound.play().catch(() => {});
        }
        if (time <= 0) {
          clearInterval(timer);
          launchConfetti();
          setTimeout(() => nextStep(1), 1200);
        }
      }, 1000);
    }

    // Confetti
    function launchConfetti() {
      const confetti = document.getElementById("confetti");
      confetti.innerHTML = "";
      const colors = ["#ff6b6b", "#ffd43b", "#69db7c", "#4dabf7", "#da77f2"];
      for (let i = 0; i < 120; i++) {
        const piece = document.createElement("span");
        piece.style.background = colors[Math.floor(Math.random() * colors.length)];
        piece.style.width = 10 + Math.random() * 14 + "px";
        piece.style.height = 12 + Math.random() * 16 + "px";
        piece.style.borderRadius = Math.random() > 0.5 ? "50%" : "4px";
        piece.style.position = "absolute";
        piece.style.left = "50%";
        piece.style.top = "50%";
        piece.style.opacity = "1";

        const angle = Math.random() * 2 * Math.PI;
        const distance = 80 + Math.random() * 220;
        const dx = Math.cos(angle) * distance;
        const dy = Math.sin(angle) * distance + 40;
        const duration = 1.8 + Math.random() * 1.2;

        piece.style.transition = `transform ${duration}s ease-out, opacity ${duration}s ease-out`;
        confetti.appendChild(piece);

        setTimeout(() => {
          piece.style.transform = `translate(${dx}px, ${dy}px) rotate(${Math.random() * 720}deg)`;
          piece.style.opacity = "0";
        }, 30);
      }
      setTimeout(() => { confetti.innerHTML = ""; }, 3000);
    }

    // Gift open
    function openGift(gift, msg) {
      if (gift.classList.contains("unwrap")) return;

      gift.style.transition = "transform 0.7s ease, opacity 0.7s ease";
      gift.style.transform = "scale(0) rotate(360deg)";
      gift.style.opacity = "0";

      const box = gift.parentElement.querySelector(".msg-box");
      setTimeout(() => {
        box.textContent = msg;
        box.classList.add("show");
      }, 700);

      gift.classList.add("unwrap");
    }

    // Music
    const bgMusic = document.getElementById("bgMusic");
    function toggleMusic() {
      if (bgMusic.paused) bgMusic.play().catch(() => {});
      else bgMusic.pause();
    }

    // Start
    nextStep(0);
    startCountdown();
  </script>
</body>
</html>
